{% extends "base.html" %}
{% load pybo_filter %}
{% block content %}
<table>
    <thead>
        <tr>
           <th>번호</th> 
           <th>제목</th> 
           <th>작성일시</th> 
        </tr>
    </thead>
    <tbody>
    {% if question_list %}
        {% for question in question_list %}
        <tr>
            <td>{{ question_list.paginator.count|sub:question_list.start_index|sub:forloop.counter0|add:1 }}</td>
            <td>
                <a href="{% url 'pybo:detail' question.id %}">{{ question.subject }}</a>
                
                {% if question.answer_set.count > 0 %}
                <span>
                    <mark>{{ question.answer_set.count }}</mark>
                </span>
                {% endif %}
            </td>
            <td>{{ question.create_date }}</td>
        </tr>
        {% endfor %}
    {% else %}
        <p>질문이 없습니다.</p>
    {% endif %}

    </tbody>
</table>

<div class="grid">
    {% for page_number in question_list.paginator.page_range %}
    {% if page_number >= question_list.number|add:-3 and page_number <= question_list.number|add:3 %}
    {% if page_number == question_list.number %}
    <div><a href="?page={{ page_number }}"><button>{{ page_number }}</button></a></div>
    {% else %}
    <div><a href="?page={{ page_number }}"><button class="secondary">{{ page_number }}</button></a></div>
    {% endif %}
    {% endif %}
    {% endfor %}
</div>


<a href="{% url 'pybo:question_create' %}">질문 등록하기</a>
{% endblock %}